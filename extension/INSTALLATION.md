# Nexus Browser Extension 安装指南

## 🎉 构建成功！

恭喜！Nexus 浏览器插件已经成功重构并构建完成，现在使用 **Side Panel API** 提供更好的用户体验。

## 📁 构建文件位置

- **生产版本**: `build/chrome-mv3-prod/`
- **开发版本**: `build/chrome-mv3-dev/`

## 🔧 安装到浏览器

### Chrome/Edge/Brave 安装步骤：

1. 打开浏览器，进入扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
   - Brave: `brave://extensions/`

2. 开启"开发者模式"（右上角开关）

3. 点击"加载已解压的扩展程序"

4. 选择以下目录之一：
   - **开发测试**: `nexus/extension/build/chrome-mv3-dev/`
   - **生产使用**: `nexus/extension/build/chrome-mv3-prod/`

5. 插件将出现在扩展列表中

## 🚀 使用方法

### 🎯 **Side Panel 体验**
- **点击插件图标**：在浏览器工具栏中点击 Nexus 图标，将在右侧打开侧边栏
- **保持页面不变**：侧边栏不会干扰当前页面浏览
- **更宽的界面**：相比传统 popup，提供更舒适的操作空间
- **持续可用**：侧边栏保持打开状态，方便连续使用

### 📋 **主要功能**
1. **身份验证同步**: 自动检测并同步前端网站登录状态
2. **智能内容提取**: 自动识别当前页面的主要内容
3. **AI 分析处理**: 
   - 生成内容摘要
   - 提取关键点
   - 智能问答
4. **知识库保存**: 将分析结果保存到个人知识库

## 🚀 功能特性

### ✅ 已实现功能
- 🔐 **身份验证同步**: 自动与前端网站同步登录状态
- 📄 **智能内容提取**: 自动识别并提取网页主要内容
- 🤖 **AI 分析**: 生成内容摘要和关键点提取
- 💾 **知识库保存**: 将分析结果保存到个人知识库
- ⚙️ **多环境配置**: 支持本地、测试、生产环境切换
- 🎨 **现代化 UI**: 基于 Tailwind CSS 的美观界面
- 🔄 **Side Panel API**: 提供更好的用户体验

### 🔧 技术栈
- **框架**: Plasmo (浏览器插件专用框架)
- **前端**: React + TypeScript
- **样式**: Tailwind CSS
- **状态管理**: Zustand
- **图标**: Lucide React
- **构建工具**: Parcel (内置于 Plasmo)
- **界面模式**: Side Panel API (Chrome 114+)

## 🛠️ 开发命令

```bash
# 开发模式 (本地环境)
pnpm dev:local

# 开发模式 (测试环境)
pnpm dev:staging

# 构建生产版本
pnpm build:prod

# 构建测试版本
pnpm build:staging

# 打包为 ZIP (生产)
pnpm package:prod
```

## 🌐 环境配置

插件支持三种环境：

- **本地**: `http://localhost:8000` (API) + `http://localhost:3000` (前端)
- **测试**: 测试服务器地址
- **生产**: 生产服务器地址

## 📋 权限说明

插件请求的权限：
- `storage`: 存储用户设置和认证信息
- `sidePanel`: 使用侧边栏 API
- `scripting`: 注入内容提取脚本
- `activeTab`: 访问当前标签页内容
- `contextMenus`: 右键菜单功能
- `notifications`: 显示操作通知

## 🔍 故障排除

### 常见问题：

1. **插件无法加载**
   - 确保选择了正确的构建目录
   - 检查是否开启了开发者模式

2. **侧边栏无法打开**
   - 确保使用 Chrome 114+ 或 Edge 114+ 版本
   - 检查是否正确安装了插件

3. **无法登录**
   - 确保前端网站已登录
   - 检查 API 地址配置是否正确

4. **内容提取失败**
   - 某些网站可能有特殊的内容结构
   - 可以手动选择文本后使用插件

5. **API 调用失败**
   - 检查网络连接
   - 确认 API 服务器正在运行
   - 验证环境配置是否正确

## 📞 技术支持

如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 插件的选项页面配置
3. 后端 API 服务状态

## 🆕 Side Panel 优势

相比传统 popup 模式，Side Panel 提供：
- **更大的操作空间**: 侧边栏宽度更适合复杂操作
- **持续可用性**: 不会因为点击页面而关闭
- **更好的多任务体验**: 可以同时浏览网页和使用 AI 功能
- **现代化体验**: 符合现代浏览器的设计趋势

---

**🎊 重构完成！从复杂的遗留代码到现代化的 MVP 架构，现在使用 Side Panel API 提供更优秀的用户体验！** 